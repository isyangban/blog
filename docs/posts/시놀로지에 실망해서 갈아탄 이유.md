---
layout: Post
title: 시놀로지에 배어본 PC로 갈아탄 이유
category: SysAdmin
date: "2020-04-19T16:04:39.584Z"
tags: ["NAS", "Server"]
---
# 시놀로지
시놀로지는 NAS의 대명사와 같은 제조사이다. NAS를 산다고 하면 가장 먼저 추천되는 
회사이기도 하고, 편의성과 높은 안정성 때문에 많은 사랑을 받고 있다. 
나도 서버 데이터를 백업할 NAS 후보군을 고민하다가 대세(?)를 따라서 시놀로지를 
구매하게 되었다. 구매한 모델은 시놀로지 218+ 모델이다. 

## 약간 아쉬운 성능
객관적으로 테스트한 것은 아니어서 얼마 만큼 성능이 더 좋다 안좋다는 말하기 힘들지만, 6년전에 산 인텔 펜티엄 하스웰 서버보다 성능이 좀 떨어졌다. 
인텔 펜티엄이 달린 컴퓨터에서 -> 시놀로지 218+로 rsync을 이용해서 파일을 자주 이동시켰다. 
그때 CPU사용률을 확인해본 결과 시놀로지는 약 50프로의 cpu를 사용했었고, 하스웰 펜티엄을 장착한 오래된 서버는 10프로 내외의 cpu를 사용했었다.
펜티엄 cpu가 인텔의 데스크탑 cpu중 가장 저렴한 라인업 중 하나임을 생각해보았을 때,
시놀로지 NAS의 cpu성능은 좀 아쉬웠었다. 

## 암호화 기능의 아쉬움
시놀로지의 경우 디스크 암호화 기능을 제공한다. 
하지만 구현상의 문제 때문에 몇가지 제약이 있는데 단점이 좀 치명적이다.
가장 큰 제약은 파일 이름 길이 143글자 (한글은 47자) 제한이다.
윈도우가 예전에 욕먹던 256글자 길이 제한보다 훨 빡빡하다 -_-;;
윈도우는 하위호완성을 미친듯이 지키려는 회사라 이런 글자 수 제약을
푸는데 오래걸렸다. 하지만 시놀로지의 경우에는 이런 제약조차토 추후 
업데이트를 이용해서 해결하는 것조차 불투명해보인다. 자체 조사 결과
시놀로지 내부적으로 디스크 암호화를 위해 (eCryptFs)를 사용하는 것 같은데 
파일 이름 길이 문제는 10년동안 
[won't fix](https://bugs.launchpad.net/ecryptfs/+bug/344878) 
라고 해놓은 사항이라 수정될 가능성은 적어보인다.

또한 Sparse File 문제도 있어서 파일 용량이 커지는 문제도 있는 것 같다.

## 설정 파일을 직접 건드리기 까다로움 
대부분의 시놀로지에서 제공하는 서비스들을 설정하려면
웹에서 제공하는 설정툴을 이용해서 해야한다. 편리한 방법이긴
하지만 GUI상에서 해당 설정 옵션이 없을 경우 문제가 있다.
이런 경우에는 보통 대처법이 2가지라고 본다.
1. 그냥 해당 옵션을 깔끔하게 포기.
2. 설정 파일이 덮어쓰기 될 수 있을 수 있음을 인지하고 
설정 파일을 일단 변경한다. 

![SSH Settings](~@assets/img/synology/ssh.png)
예를 들면 SSH에서 password based authentication을 끈다든지, 어떤 cypher만 허용할지 등의 설정은 GUI상에서 상당히 제한적이었다. 설정파일을 수정하는 방법도 있겠지만, 위에서 언급했듯이 시놀로지 자체 업데이트나 설정 툴로 인해서 언제든지 설정 파일이 덮어쓰기 될 수 있었기 때문에 결국에는 시놀로지가 제공하는 기능 내에서만 프로그램을 써야한다.

## 의외로 외국에서는 잘 안쓰임?
한국에서는 NAS관련된 글들을 찾아보면 거의 시놀로지를 기준으로 작성되어 있어서 막히는 문제가 생겼을 때 정보를 찾기 쉽다. 근데 막상 영어로 막히는 문제를 검색해보았을 때에는 사용자가 적어서인지 좋은 대답을 얻기 힘들었다. 
아마도 넓은 집 + 누진세 걱정이 없는 나라들이 훨 많을테니 굳이 
작고 컴팩트한 NAS 보다는 직접 랙서버니 조립 서버니 구축하고 있는 사람이
많은 것 아닐까? 

이렇다 보니 한국에서 많이 쓰는 프로그램에 대해서는 비교적 많은 정보를 얻을 수 있었지만, 새로 뜨는 소프트웨어나 한글화가 안된 소프트웨어에 대한 많은 정보를 얻기 어려웠다. 한국에서 자주 쓰는 대세 프로그램들을 이용하면 아무런 문제가 없겠지만, 
나의 평상시 사용 패턴을 생각해보았을 때에, 이것은 제약과 불편함으로 느껴졌다. 

## 그래도 편의성은 좋았다.
위에 단점을 쌈사먹을 수 있는 장점이라고 생각한다. 가령 주기적으로 파일에 대한 스냅샷을 찍고 싶다고 하자 (btrfs, zfs 이용한다고 할 때). 보통 리눅스에서는 쉘 스크립트도 작성하고, crontab도 설정해줘야하고, 실제로 자기가 작성한
코드도 잘 작동하는지 테스트를 해봐야한다. 매일 매일 스냅샷이 잘 생성되는지, 스냅샷 갯수가 몇개 이상이 되면 옛날것은 잘 삭제 되는지 등등 신경 쓸 것이 많다. 만약 쉘 스크립트를 작성한 경험이 없거나, 아예 리눅스에 대해서 잘 모른다면 상당히 힘들 것이다. 시놀로지의 같은 경우 앱 하나 설치하고, 클릭 한번에 스냅샷 키고, 스냅샷 주기나 갯수 설정하면 자동으로 되니깐 너무나 좋았다. 

그 외에도 WebDav 설정을 한번의 클릭으로 된다든지, 파일 공유 링크 만들기 기능이라든지 직접 서버를 구축한다면 상당히 번거로운 작업들은 비교적 손쉽게 할 수 있는 것은 크나큰 장점이 아닐 수 없다.

## 결론은?
저렴이 베어본 PC를 주문했다. 시놀로지 중고 시세 + 5만원 정도 들이면 살 수 있는 예산내로. 
